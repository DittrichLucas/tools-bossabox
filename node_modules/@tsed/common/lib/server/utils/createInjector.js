"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const di_1 = require("@tsed/di");
const ServerSettingsService_1 = require("../../config/services/ServerSettingsService");
function createInjector(settings) {
    const injector = new di_1.InjectorService();
    injector.settings = createSettingsService(injector);
    injector.scopes = Object.assign({}, (settings.scopes || {}), { [di_1.ProviderType.CONTROLLER]: settings.controllerScope });
    return injector;
}
exports.createInjector = createInjector;
function createSettingsService(injector) {
    const provider = di_1.GlobalProviders.get(ServerSettingsService_1.ServerSettingsService);
    const settingsService = injector.invoke(provider.useClass);
    injector.forkProvider(ServerSettingsService_1.ServerSettingsService, settingsService);
    return settingsService;
}

//# sourceMappingURL=createInjector.js.map
