{"version":3,"sources":["mvc/components/GlobalAcceptMimesMiddleware.ts"],"names":[],"mappings":";;;AAAA,yDAAgD;AAChD,uFAAkF;AAClF,8DAAyD;AACzD,+DAA0D;AAG1D;;GAEG;AAEH,IAAa,2BAA2B,GAAxC,MAAa,2BAA2B;IACtC,YAAoB,qBAA4C;QAA5C,0BAAqB,GAArB,qBAAqB,CAAuB;IAAG,CAAC;IAEpE,GAAG,CAAY,OAAY;QACzB,MAAM,IAAI,GAAG,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,IAAS,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;QAE/F,IAAI,CAAC,IAAI,EAAE;YACT,MAAM,IAAI,iCAAa,CAAC,IAAI,CAAC,qBAAqB,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;SAC5E;IACH,CAAC;CACF,CAAA;AAPC;IAAK,mBAAA,iBAAO,EAAE,CAAA;;;;sDAMb;AATU,2BAA2B;IADvC,uBAAU,EAAE;6CAEgC,6CAAqB;GADrD,2BAA2B,CAUvC;AAVY,kEAA2B","file":"GlobalAcceptMimesMiddleware.js","sourcesContent":["import {NotAcceptable} from \"ts-httpexceptions\";\nimport {ServerSettingsService} from \"../../config/services/ServerSettingsService\";\nimport {Request} from \"../../filters/decorators/request\";\nimport {Middleware} from \"../decorators/class/middleware\";\nimport {IMiddleware} from \"../interfaces/index\";\n\n/**\n * @middleware\n */\n@Middleware()\nexport class GlobalAcceptMimesMiddleware implements IMiddleware {\n  constructor(private serverSettingsService: ServerSettingsService) {}\n\n  use(@Request() request: any) {\n    const find = this.serverSettingsService.acceptMimes.find((mime: any) => request.accepts(mime));\n\n    if (!find) {\n      throw new NotAcceptable(this.serverSettingsService.acceptMimes.join(\", \"));\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}