{"version":3,"sources":["mvc/components/AcceptMimesMiddleware.ts"],"names":[],"mappings":"AAGA,OAAO,EAAC,gBAAgB,EAAC,MAAM,2BAA2B,CAAC;AAE3D,OAAO,EAAC,WAAW,EAAC,MAAM,eAAe,CAAC;AAE1C;;;GAGG;AACH,qBACa,qBAAsB,YAAW,WAAW;IAChD,GAAG,CAAiB,QAAQ,EAAE,gBAAgB,EAAa,OAAO,EAAE,GAAG,GAAG,IAAI;CAStF","file":"AcceptMimesMiddleware.d.ts","sourcesContent":["import {NotAcceptable} from \"ts-httpexceptions\";\nimport {EndpointInfo} from \"../../filters/decorators/endpointInfo\";\nimport {Request} from \"../../filters/decorators/request\";\nimport {EndpointMetadata} from \"../class/EndpointMetadata\";\nimport {Middleware} from \"../decorators/class/middleware\";\nimport {IMiddleware} from \"../interfaces\";\n\n/**\n * @private\n * @middleware\n */\n@Middleware()\nexport class AcceptMimesMiddleware implements IMiddleware {\n  public use(@EndpointInfo() endpoint: EndpointMetadata, @Request() request: any): void {\n    const mimes = endpoint.get(AcceptMimesMiddleware) || [];\n\n    const find = mimes.find((mime: string) => request.accepts(mime));\n\n    if (!find) {\n      throw new NotAcceptable(mimes.join(\", \"));\n    }\n  }\n}\n"],"sourceRoot":"../../../src"}